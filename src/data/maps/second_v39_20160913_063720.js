// DEBUG BEGIN
try {
// DEBUG END
var MAP_WIDTH = 32;
var MAP_HEIGHT = 25;
var MAP_DATA = "00000000000000000000000000000000000033133000000333333330000000000000311130000003111111333333333000003111300000031111116116111130000031113000000311111161161111300333311133330003111111611611113003111111111300031111113333331330011111111111000333313330000000000311111111130000000000000000000003333111333303333133003333333330031111111113031111130031161611300111111111110111111300111616111003111111111303111113003116161130033331113333333311130033333333300311111111111113111300311111113001111111111111131113003111111110031111111111111311130031111111300333333333331113111300311133333000000000000311131113003111111130033133133133111311133331111111300311111111111113111111311111113003111111111111131111113313331330031111111111111311111130000000000333333333333333313333300000000000000000000000000000000000000000";
var MAP_OBJECT_NAMES;
	var LO1;
// DEBUG BEGIN
} catch (err) { alert(err); }
// DEBUG END

function mapInit()
{
// DEBUG BEGIN
	try {
// DEBUG END
	_objs.length = 0;
	
	mapLoadFromString(MAP_WIDTH, MAP_HEIGHT, MAP_DATA);
	
	_objs.push(
		new ObjPlayer(6, 3),
		new ObjDoor(6, 1, 0),
		new ObjDoor(13, 11, 1),
		new ObjCube(24, 15),
		new ObjSwitch(20, 21),
		new ObjDoor(17, 9, 0),
		new ObjDoor(17, 23, 0),
		new ObjDoor(24, 21, 2),
		new ObjDoor(30, 15, 1),
		new ObjDoor(28, 21, 0),
		new ObjCrystal(24, 19),
		new ObjSwitch2(27, 14),
		new ObjDoor(22, 11, 1),
		new ObjDoor(30, 11, 3),
		new ObjDoor(19, 7, 0),
		new ObjPortal(21, 4, 2, 0, 1, 0, 1),
		new ObjPotion(24, 4, 2)
	);
	LO1 = new LightsOut(17, 3, 3, 3, 2);

	MAP_OBJECT_NAMES = [ 'PLAYER', 'TUT_DOOR1', 'TUT_DOOR2', 'TUT_CUBE1', 'TUT_SW1', 'TUT_DOOR3', 'TUT_DOOR4', 'TUT_DOOR5', 'TUT_DOOR6', 'TUT_DOOR7', 'TUT_CRYSTAL', 'TUT_SW2', 'TUT_DOOR8', 'TUT_DOOR9', 'DOOR12', 'PORTAL2', 'POT3'];


// DEBUG BEGIN
} catch (err) { alert(err); }
// DEBUG END
}

function mapUpdate()
{
// DEBUG BEGIN
try {
// DEBUG END
	var PLAYER = _objs[0];
	var TUT_DOOR1 = _objs[1];
	var TUT_DOOR2 = _objs[2];
	var TUT_CUBE1 = _objs[3];
	var TUT_SW1 = _objs[4];
	var TUT_DOOR3 = _objs[5];
	var TUT_DOOR4 = _objs[6];
	var TUT_DOOR5 = _objs[7];
	var TUT_DOOR6 = _objs[8];
	var TUT_DOOR7 = _objs[9];
	var TUT_CRYSTAL = _objs[10];
	var TUT_SW2 = _objs[11];
	var TUT_DOOR8 = _objs[12];
	var TUT_DOOR9 = _objs[13];
	var DOOR12 = _objs[14];
	var PORTAL2 = _objs[15];
	var POT3 = _objs[16];
TUT_DOOR1.targetDoor = TUT_DOOR2;
TUT_DOOR2.targetDoor = TUT_DOOR1;
TUT_DOOR3.targetDoor = TUT_DOOR4;
TUT_DOOR4.targetDoor = TUT_DOOR3;
TUT_DOOR6.targetDoor = TUT_DOOR7;
TUT_DOOR7.targetDoor = TUT_DOOR6;

if (TUT_SW1.switchStatus)
{
TUT_DOOR4.targetDoor = TUT_DOOR5;
TUT_DOOR5.targetDoor = TUT_DOOR4;
}

if (TUT_SW2.switchStatus)
{
TUT_DOOR6.targetDoor = TUT_DOOR8;
TUT_DOOR8.targetDoor = TUT_DOOR6;
TUT_DOOR7.targetDoor = TUT_DOOR9;
TUT_DOOR9.targetDoor = TUT_DOOR7;
}

_glitch_time_left = 9999999;

// if (_fhdk_done)
// {
// DOOR11.targetDoor = DOOR2;
// }

if (LO1.solved)
{
	PORTAL2.kill = false;
}

// DEBUG BEGIN
} catch (err) { alert(err); }
// DEBUG END
}
